<Window x:Class="TreeCadN.kommunikacii.kommunikacii_main"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:TreeCadN.kommunikacii"
        mc:Ignorable="d"
        Title="3D объекты" Height="500" Width="900" MinHeight="500" MinWidth="900" Closing="Window_Closing">

    <Window.Resources>
        <Style x:Key="myListboxStyle">
            <Style.Resources>
                <!-- Item TextColor -->

                <!-- Background of selected item when focussed -->
                <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="#FF4992FF" />
                <!-- Background of selected item when not focussed -->
                <SolidColorBrush x:Key="{x:Static SystemColors.ControlBrushKey}" Color="#FFA7CAFF" />
            </Style.Resources>
        </Style>
    </Window.Resources>


    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="393*"/>
            <RowDefinition Height="42"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="250"/>
            <ColumnDefinition Width="1*"/>
        </Grid.ColumnDefinitions>
        <ListBox  Style="{StaticResource myListboxStyle}" x:Name="lb1" Margin="5" SelectionChanged="lb1_SelectionChanged" ScrollViewer.HorizontalScrollBarVisibility="Disabled" Grid.Column="1" RenderTransformOrigin="0.066,0.51" VerticalContentAlignment="Stretch" MouseDoubleClick="lb1_MouseDoubleClick">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Vertical" Width="150">
                        <Image Width="150" Height="150" Source="{Binding Path=jpg_path}"  />
                        <TextBlock Text="{Binding Path=name}"/>
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
            <ListBox.ItemsPanel>
                <ItemsPanelTemplate>
                    <WrapPanel/>
                </ItemsPanelTemplate>
            </ListBox.ItemsPanel>
            <ListBox.ContextMenu>
                <ContextMenu >
                    <MenuItem   Header="Добавить 3ds объект" Click="MenuItem_Click_6"  />
                    <MenuItem   Header="Редактировать" Click="MenuItem_Click_1" />
                    <MenuItem x:Name="peremestitb"   Header="Переместить" >
                        <MenuItem.ItemTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Path=name}" />
                            </DataTemplate>
                        </MenuItem.ItemTemplate>
                        <MenuItem.Resources>
                            <Style TargetType="{x:Type MenuItem}">
                                <EventSetter Event="Click" Handler="PolygonShapesMenu_OnClick" />
                            </Style>
                        </MenuItem.Resources>
                    </MenuItem>
                    <MenuItem   Header="Удалить" Click="MenuItem_Click_2" />

                    <MenuItem   Header="Отправить на фабрику" Click="MenuItem_Click_7" />
                    
                </ContextMenu>
            </ListBox.ContextMenu>
        </ListBox>
        <ListBox  Style="{StaticResource myListboxStyle}" x:Name="lb4" Margin="5" SelectionChanged="lb4_SelectionChanged" ScrollViewer.HorizontalScrollBarVisibility="Disabled" Grid.Column="1" RenderTransformOrigin="0.066,0.51" VerticalContentAlignment="Stretch" Background="#FFFFF7F7" MouseDoubleClick="lb1_MouseDoubleClick">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Vertical" Width="150">
                        <Image Width="150" Height="150" Source="{Binding Path=jpg_path}"  />
                        <TextBlock Text="{Binding Path=name}"/>
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
            <ListBox.ItemsPanel>
                <ItemsPanelTemplate>
                    <WrapPanel/>
                </ItemsPanelTemplate>
            </ListBox.ItemsPanel>
        </ListBox>
        <Button Content="Отмена" Height="22" Margin="0,10,10,0" VerticalAlignment="Top" Click="Button_Click_2" Grid.Column="1" Grid.Row="1" HorizontalAlignment="Right" Padding="10,1" Width="80"/>
        <Button Content="Ок" Click="Button_Click_1" Grid.Column="1" Grid.Row="1" HorizontalAlignment="Right" VerticalAlignment="Center" Padding="1" Width="80" Margin="0,10,100,10"/>
        <StackPanel x:Name="stpan" Orientation="Horizontal" Grid.Column="1" Grid.Row="1">
            <Button Content="Добавить 3ds обьект" HorizontalAlignment="Left" Margin="10,10,0,0" VerticalAlignment="Top" Width="130" Click="Button_Click" />
        </StackPanel>
        <TabControl x:Name="tab1" Margin="5" Grid.RowSpan="2" VerticalContentAlignment="Stretch" SelectionChanged="tab1_SelectionChanged">
            <TabItem Header="С сервера">
                <Grid Background="#FFE5E5E5">


                    <ListBox  x:Name="lb3" SelectionChanged="lb3_SelectionChanged" Margin="0" Grid.Row="1" VerticalContentAlignment="Stretch" >
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Path=name}"/>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                </Grid>
            </TabItem>
            <TabItem Header="Пользовательские">
                <Grid Background="#FFE5E5E5">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="43"/>
                        <RowDefinition Height="367*"/>
                    </Grid.RowDefinitions>
                    <ListBox  x:Name="lb2" SelectionChanged="lb2_SelectionChanged" Margin="0" Grid.Row="1" VerticalContentAlignment="Stretch"  >
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Path=name}"/>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                        <ListBox.ContextMenu>
                            <ContextMenu >
                                <MenuItem   Header="Удалить" Click="MenuItem_Click" />
                            </ContextMenu>
                        </ListBox.ContextMenu>
                    </ListBox>
                    <Button Content="Новая категория" HorizontalAlignment="Left" Margin="10,10,0,0" VerticalAlignment="Top" Width="106" Click="Button_Click_5"/>

                </Grid>
            </TabItem>
        </TabControl>
        <Button x:Name="btnserv" Grid.Column="1" HorizontalAlignment="Left" Margin="10,10,0,0" Grid.Row="1" VerticalAlignment="Top" Width="53" Background="#FF8FF100" Content="Сервер" Click="Button_Click_6">
            <Button.ContextMenu>
                <ContextMenu >
                    <MenuItem   Header="Новая категория" Click="MenuItem_Click_3"  />
                    <MenuItem   Header="Удалить категорию" Click="MenuItem_Click_4"  />
                    <MenuItem   Header="Удалить объект" Click="MenuItem_Click_5" />
                    <MenuItem x:Name="peremestitb_serv"   Header="Переместить" >
                        <MenuItem.ItemTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Path=name}" />
                            </DataTemplate>
                        </MenuItem.ItemTemplate>
                        <MenuItem.Resources>
                            <Style TargetType="{x:Type MenuItem}">
                                <EventSetter Event="Click" Handler="peremestitb_serv_event" />
                            </Style>
                        </MenuItem.Resources>
                    </MenuItem>
                </ContextMenu>
            </Button.ContextMenu>
        </Button>

    </Grid>
</Window>
